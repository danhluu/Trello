{"ast":null,"code":"var _jsxFileName = \"E:\\\\Blameo\\\\BaseProject\\\\React\\\\Ha\\\\trello-fe\\\\src\\\\pages\\\\Comment\\\\Task.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport './task.css';\nimport { PlusOutlined, HomeOutlined, MenuOutlined, MessageOutlined, SmileOutlined, UserAddOutlined, FieldTimeOutlined, PictureOutlined, DownOutlined // Quang\n} from '@ant-design/icons';\nimport { Button, Modal, Typography, Avatar, Form, Checkbox, Dropdown, DatePicker } from \"antd\"; // Quang\n\nimport moment from 'moment'; // import api from './callApi/baseUrl';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { storage } from '../../firebase/firebase-config';\nimport { getAllUserInTask, getComments, getDeadlineByTaskIdApi, getUsersToAddToTask, postCommentApi, postUserToTaskApi, testApi, updateImageTask } from '../../Api/func/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Task(props) {\n  _s();\n\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const showModal = async () => {\n    setIsModalVisible(true);\n    console.log(userTask);\n  }; // const handleOk = () => {\n  //     setIsModalVisible(false);\n  // };\n\n\n  const handleCancel = () => {\n    const dom = document.getElementById(\"modal-member\");\n    dom.classList.add(\"isHide\");\n    const domImage = document.getElementById(\"modal-picture\");\n    domImage.classList.add(\"isHide\");\n    setIsModalVisible(false);\n  };\n  /**\r\n   * Quang Bổ sung phần deadline\r\n   */\n  // new\n  // deadline\n\n\n  const [startDate, setStartDate] = useState(null);\n  const [endDate, setEndDate] = useState(null);\n  const [done, setDone] = useState(true);\n  const [colorDone, setColorDone] = useState(\"\");\n  const [openDeadline, setOpenDeadline] = useState(false);\n  const [isModalDeadVisible, setIsModalDeadVisible] = useState(false);\n\n  const showModalDead = async () => {\n    const dl = await getDeadlineByTaskIdApi({\n      taskId: props.obj.taskId\n    });\n\n    if (!dl.data) {\n      console.log(\"Chua co dealine\");\n    } else {\n      setStartDate(dl.startDate);\n      setEndDate(dl.endDate);\n    }\n\n    setIsModalDeadVisible(true);\n  };\n\n  const handleCancelDead = () => {\n    setIsModalDeadVisible(false);\n  };\n\n  const handleSaveDeadline = () => {\n    console.log(startDate);\n    console.log(endDate);\n    setOpenDeadline(true);\n    setIsModalDeadVisible(false);\n  };\n\n  const handleDeleteDeadline = () => {\n    setOpenDeadline(false);\n  };\n\n  function getDateValue(dates, dateStrings) {\n    setStartDate(dateStrings[0]);\n    setEndDate(dateStrings[1]);\n  }\n\n  const onChangeCheckColor = () => {\n    setDone(!done);\n    {\n      done ? setColorDone(\"#61bd4f\") : setColorDone(\"#EBECF0\");\n    }\n  };\n\n  const {\n    RangePicker\n  } = DatePicker; //NDL\n\n  const styleTask = {\n    padding: '5px 10px',\n    background: '#fff',\n    marginBottom: '10px',\n    borderRadius: '5px',\n    fontWeight: '500',\n    textAlign: 'left',\n    cursor: 'pointer'\n  };\n\n  const solves = () => {\n    alert(\"Xử lý\");\n  }; //state\n\n\n  const [comments, setcomments] = useState([]);\n  const [contentCmt, setcontentCmt] = useState(\"\");\n  const [userTask, setuserTask] = useState([]);\n  const [userNoTask, setuserNoTask] = useState([]);\n  const [image, setimage] = useState(props.obj.image); //onchange\n\n  const commentOnChange = e => {\n    if (e.target.value) {\n      setcontentCmt(e.target.value);\n    }\n  }; //get data\n  //get all comment\n\n\n  const getAllComment = async () => {\n    const cmt = await getComments({\n      taskId: props.obj.taskId\n    });\n    console.log(\"list cmt: \", cmt.data);\n    return cmt.data;\n  }; //Lấy tất cả user được giao việc trong task\n\n\n  const getAllUserTask = async () => {\n    const ut = await getAllUserInTask({\n      taskId: props.obj.taskId\n    });\n    console.log(ut); // const ut = await api.get(\"user_task\");\n\n    return ut.data;\n  }; //Lấy tât cả user trong bảng mà ko thuộc task\n\n\n  const getAllUserNoTask = async () => {\n    const unt = await getUsersToAddToTask({\n      taskId: props.obj.taskId\n    }); // const unt = await api.get(\"user_no_task\");\n\n    return unt.data;\n  }; //Chi tiết người dùng trong task\n\n\n  const detailUserTask = obj => {\n    console.log(obj);\n  };\n  /**\r\n   * 3 chức năng trong task\r\n   * Thêm Thành viên, Deadline, ảnh bìa\r\n   */\n  //Click nut them thanh vien\n\n\n  const btnAddMemberOnClick = async () => {\n    const dom = document.getElementById(\"modal-member\");\n    dom.classList.toggle(\"isHide\");\n    const x = await getAllUserNoTask();\n    setuserNoTask(x);\n  };\n\n  const btnCloseOnClick = () => {\n    const dom = document.getElementById(\"modal-member\");\n    dom.classList.add(\"isHide\");\n  }; //Click vào thành viên để thêm thành viên vào táks\n\n\n  const btnAddMemberTask = async obj => {\n    const arr = userNoTask;\n    console.log(\"arr: \", arr);\n\n    for (let i = 0; i < arr.length; i++) {\n      if (obj.id == arr[i].id) {\n        arr.splice(i, 1); // console.log(arr[i]);\n      }\n    }\n\n    await postUserToTaskApi({\n      userId: obj.id,\n      taskId: props.obj.taskId\n    });\n    setuserTask([...userTask, obj]);\n    setuserNoTask([...arr]);\n  }; //ảnh bìa - mở\n\n\n  const chooseImage = () => {\n    const dom = document.getElementById(\"modal-picture\");\n    dom.classList.toggle(\"isHide\");\n  }; //ảnh bìa - đóng\n\n\n  const btnCloseImageOnClick = () => {\n    const dom = document.getElementById(\"modal-picture\");\n    dom.classList.add(\"isHide\"); // setimage(\"\");\n  }; //Ảnh bìa - chọn ảnh\n\n\n  const imageOnChange = e => {\n    if (e.target.files[0]) {\n      setimage(e.target.files[0]);\n    }\n  }; //Ảnh bìa - tải lên ảnh\n\n\n  const btnUploadImageOnClick = () => {\n    console.log(image.name);\n\n    if (image.name) {\n      var imgSplit = image.name.split(\".\");\n      var imgName = uuidv4() + \".\" + imgSplit[imgSplit.length - 1]; // console.log(imgName);\n\n      const uploadTask = storage.ref(`images/${imgName}`).put(image);\n      uploadTask.on(\"state_change\", snapshot => {}, error => {\n        console.log(error);\n      }, () => {\n        storage.ref('images').child(imgName).getDownloadURL().then(async url => {\n          console.log(url);\n          await updateImageTask({\n            taskId: props.obj.taskId,\n            urlImage: url\n          }).then(res => {\n            console.log(\"sau khi upload:\", res);\n            setimage(res.data);\n          });\n        });\n      });\n    } else alert(\"Chwa chon anh\");\n  };\n  /**\r\n   * Post Data\r\n   */\n  //post comment\n\n\n  const postComment = async () => {\n    const comment = {\n      taskId: props.obj.taskId,\n      content: contentCmt,\n      fullName: props.user.fullName\n    }; // debugger;\n\n    await postCommentApi({\n      taskId: props.obj.taskId,\n      content: contentCmt\n    }).then(res => {\n      setcomments([...comments, comment]);\n      setcontentCmt(\"\");\n    }); // await api.post(\"/comment\",comment).then(res=>{\n    //     console.log(res);\n    //     setcomments([...comments,comment]);\n    //     setcontentCmt(\"\");\n    // }).catch(ex=>{\n    //     console.log(ex);\n    // })\n  }; //useeffect\n\n\n  useEffect(() => {\n    console.log(\"obj: \", props.obj);\n\n    const getAll = async () => {\n      //comment\n      const allComment = await getAllComment();\n\n      if (allComment) {\n        console.log(allComment);\n        setcomments(allComment);\n      } //user_task\n\n\n      const allUserTask = await getAllUserTask();\n      if (allUserTask) setuserTask(allUserTask);\n    };\n\n    getAll();\n  }, []);\n  console.log(\"user_task: \", userTask);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: image ? image : \"\",\n      className: image == \"\" ? \"isHide\" : \"\",\n      style: {\n        width: \"100%\",\n        height: \"400px\",\n        margin: \"15px 0 10px 0\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-custom\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__name flex mb-10\",\n          style: {\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(HomeOutlined, {\n            className: \"common-icon width-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"name-name\",\n            children: \"T\\xEAn th\\u1EBB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__memeber flex mb-10\",\n          style: {\n            fontSize: \"14px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"width-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"memeber-memeber\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"TH\\xC0NH VI\\xCAN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [userTask.map((obj, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => detailUserTask(obj),\n                className: \"member-task\",\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  style: {\n                    color: '#fff',\n                    backgroundColor: '#84ABF7',\n                    fontSize: '12px',\n                    fontWeight: '500'\n                  },\n                  children: obj.fullName ? obj.fullName.charAt(0).toUpperCase() : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 49\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 45\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: btnAddMemberOnClick,\n                className: \"member-task\",\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  style: {\n                    color: '#fff',\n                    backgroundColor: '#84ABF7',\n                    fontSize: '12px',\n                    fontWeight: '500',\n                    margin: '0 0 0 2px'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 44\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 29\n          }, this), openDeadline ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"memeber-deadline\",\n            style: {\n              marginLeft: \"20px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"NG\\xC0Y H\\u1EBET H\\u1EA0N\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"box-deadline\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"time-deadline\",\n                children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: !done,\n                  onChange: onChangeCheckColor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"From \", startDate, \" to \", endDate]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 41\n                }, this), !done ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"check-done\",\n                  children: \"Done !\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n                  trigger: \"click\",\n                  overlay: /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: handleDeleteDeadline,\n                    className: \"butDelete-Deadline\",\n                    children: \"Delete Deadline\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 45\n                  }, this),\n                  placement: \"bottomRight\",\n                  arrow: true,\n                  children: /*#__PURE__*/_jsxDEV(DownOutlined, {\n                    style: {\n                      marginLeft: \"7px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__description flex mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(MenuOutlined, {\n            className: \"common-icon width-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"des-name\",\n            children: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__des-input flex mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"width-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              padding: \"0 0 0 10px\"\n            },\n            className: \"des-input\",\n            placeholder: \"M\\xF4 t\\u1EA3 c\\xF4ng vi\\u1EC7c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__cmt flex mb-10\",\n          style: {\n            marginTop: \"40px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(MessageOutlined, {\n            className: \"width-10 common-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cmt-name\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"B\\xECnh lu\\u1EADn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              children: \"\\u1EA8n chi ti\\u1EBFt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__cmt flex mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            style: {\n              color: '#fff',\n              backgroundColor: '#84ABF7',\n              fontSize: '12px',\n              fontWeight: '500',\n              margin: '5px 15px 0 12px'\n            },\n            children: \"L\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: commentOnChange,\n            value: contentCmt,\n            style: {\n              padding: \"0 0 0 10px\"\n            },\n            className: \"cmt-input\",\n            placeholder: \"Vi\\u1EBFt B\\xECnh Lu\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"width-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: postComment,\n            children: \"L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 25\n        }, this), comments.map((obj, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-left__cmt-content flex mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            style: {\n              color: '#fff',\n              backgroundColor: '#84ABF7',\n              fontSize: '12px',\n              fontWeight: '500',\n              margin: '5px 15px 0 12px'\n            },\n            children: obj.fullName ? obj.fullName.charAt(0).toUpperCase() : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cmt-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cmt-user\",\n              children: [obj.fullName, /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cmt-date\",\n                children: obj.createDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cmt-content\",\n              children: obj.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cmt-react\",\n              children: [/*#__PURE__*/_jsxDEV(SmileOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 45\n              }, this), \" - Ch\\u1EC9nh s\\u1EEDa - Xo\\xE1\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 37\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 33\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-right\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: btnAddMemberOnClick,\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(UserAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 33\n            }, this), \"Th\\xE0nh vi\\xEAn\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"modal-member\",\n            className: \"isHide modal-member\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: btnCloseOnClick,\n              className: \"btnClose\",\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n              style: {\n                marginTop: \"7px\",\n                fontSize: \"14px\"\n              },\n              children: \"Th\\xEAm th\\xE0nh vi\\xEAn v\\xE0o b\\u1EA3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              width: \"90%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-member-board\",\n              children: \"Th\\xE0nh vi\\xEAn c\\u1EE7a b\\u1EA3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 33\n            }, this), userNoTask.map((obj, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"memeber-list\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => btnAddMemberTask(obj),\n                className: \"btn-member-task\",\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  className: \"avatar\",\n                  children: obj.fullName ? obj.fullName.charAt(0).toUpperCase() : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 49\n                }, this), obj.fullName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 45\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 41\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-right\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: showModalDead,\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(FieldTimeOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 33\n            }, this), \"Ng\\xE0y\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            width: 300,\n            title: \"Deadline\",\n            visible: isModalDeadVisible,\n            footer: null,\n            onCancel: handleCancelDead,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"title-date\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"Start Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    style: {\n                      marginLeft: \"68px\"\n                    },\n                    children: \"End Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(RangePicker, {\n                  defaultValue: [moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)],\n                  onChange: getDateValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleSaveDeadline,\n                  style: {\n                    marginTop: \"15px\"\n                  },\n                  type: \"primary\",\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-right\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: chooseImage,\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(PictureOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 33\n            }, this), \"\\u1EA2nh B\\xECa\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"modal-picture\",\n            className: \"modal-member isHide\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: btnCloseImageOnClick,\n              className: \"btnClose\",\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n              style: {\n                marginTop: \"7px\",\n                fontSize: \"14px\"\n              },\n              children: \"\\u1EA2nh b\\xECa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              width: \"90%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-member-board\",\n              children: \"T\\u1EC7p \\u0110\\xEDnh K\\xE8m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: imageOnChange,\n              style: {\n                marginLeft: \"13px\"\n              },\n              type: \"file\",\n              accept: \"image/*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: btnUploadImageOnClick,\n              style: {\n                width: \"90%\",\n                margin: \"20px 0 0 13px\"\n              },\n              children: \"Upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: image.name || image == \"\" ? \"isHide\" : \"\",\n              style: {\n                width: \"150px\",\n                height: \"150px\",\n                margin: \"10px 0 0 40px\"\n              },\n              src: image ? image : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Task, \"5fX6x/nvTsl0QeBdsmskmrbGJbI=\");\n\n_c = Task;\nexport default Task;\n\nvar _c;\n\n$RefreshReg$(_c, \"Task\");","map":{"version":3,"sources":["E:/Blameo/BaseProject/React/Ha/trello-fe/src/pages/Comment/Task.js"],"names":["React","useEffect","useState","PlusOutlined","HomeOutlined","MenuOutlined","MessageOutlined","SmileOutlined","UserAddOutlined","FieldTimeOutlined","PictureOutlined","DownOutlined","Button","Modal","Typography","Avatar","Form","Checkbox","Dropdown","DatePicker","moment","v4","uuidv4","storage","getAllUserInTask","getComments","getDeadlineByTaskIdApi","getUsersToAddToTask","postCommentApi","postUserToTaskApi","testApi","updateImageTask","Task","props","isModalVisible","setIsModalVisible","showModal","console","log","userTask","handleCancel","dom","document","getElementById","classList","add","domImage","startDate","setStartDate","endDate","setEndDate","done","setDone","colorDone","setColorDone","openDeadline","setOpenDeadline","isModalDeadVisible","setIsModalDeadVisible","showModalDead","dl","taskId","obj","data","handleCancelDead","handleSaveDeadline","handleDeleteDeadline","getDateValue","dates","dateStrings","onChangeCheckColor","RangePicker","styleTask","padding","background","marginBottom","borderRadius","fontWeight","textAlign","cursor","solves","alert","comments","setcomments","contentCmt","setcontentCmt","setuserTask","userNoTask","setuserNoTask","image","setimage","commentOnChange","e","target","value","getAllComment","cmt","getAllUserTask","ut","getAllUserNoTask","unt","detailUserTask","btnAddMemberOnClick","toggle","x","btnCloseOnClick","btnAddMemberTask","arr","i","length","id","splice","userId","chooseImage","btnCloseImageOnClick","imageOnChange","files","btnUploadImageOnClick","name","imgSplit","split","imgName","uploadTask","ref","put","on","snapshot","error","child","getDownloadURL","then","url","urlImage","res","postComment","comment","content","fullName","user","getAll","allComment","allUserTask","width","height","margin","marginTop","fontSize","map","index","color","backgroundColor","charAt","toUpperCase","marginLeft","createDate","dateFormat"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport './task.css';\r\nimport { \r\n    PlusOutlined\r\n    ,HomeOutlined,\r\n    MenuOutlined,\r\n    MessageOutlined,\r\n    SmileOutlined,\r\n    UserAddOutlined,\r\n    FieldTimeOutlined,\r\n    PictureOutlined,\r\n    DownOutlined // Quang\r\n    } from '@ant-design/icons';\r\n    import {\r\n        Button,\r\n        Modal,\r\n        Typography,\r\n        Avatar,\r\n        Form,\r\n        Checkbox,\r\n        Dropdown,\r\n        DatePicker\r\n      } from \"antd\"; // Quang\r\nimport moment from 'moment';\r\n// import api from './callApi/baseUrl';\r\nimport {v4 as uuidv4} from 'uuid'\r\nimport { storage } from '../../firebase/firebase-config';\r\nimport { getAllUserInTask, getComments,getDeadlineByTaskIdApi,getUsersToAddToTask,postCommentApi, postUserToTaskApi, testApi, updateImageTask } from '../../Api/func/user';\r\n\r\nfunction Task(props) {\r\n    const [isModalVisible, setIsModalVisible] = useState(false);      \r\n\r\n    const showModal = async () => {\r\n        setIsModalVisible(true);\r\n        console.log(userTask)\r\n    };\r\n    // const handleOk = () => {\r\n    //     setIsModalVisible(false);\r\n    // };\r\n    \r\n    const handleCancel = () => {\r\n        const dom = document.getElementById(\"modal-member\");\r\n        dom.classList.add(\"isHide\")\r\n        const domImage = document.getElementById(\"modal-picture\");\r\n        domImage.classList.add(\"isHide\")\r\n        setIsModalVisible(false);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Quang Bổ sung phần deadline\r\n     */\r\n    // new\r\n    // deadline\r\n    const [startDate, setStartDate] = useState(null);\r\n    const [endDate, setEndDate] = useState(null);\r\n    const [done, setDone] = useState(true);\r\n    const [colorDone, setColorDone] = useState(\"\");\r\n    const [openDeadline, setOpenDeadline] = useState(false);\r\n    const [isModalDeadVisible, setIsModalDeadVisible] = useState(false);\r\n    const showModalDead = async () => {\r\n        const dl = await getDeadlineByTaskIdApi({taskId:props.obj.taskId});\r\n        if(!dl.data){\r\n            console.log(\"Chua co dealine\")\r\n        }else{\r\n            setStartDate(dl.startDate);\r\n            setEndDate(dl.endDate)\r\n        }\r\n        setIsModalDeadVisible(true);\r\n    };\r\n    const handleCancelDead = () => {\r\n        setIsModalDeadVisible(false);\r\n    };\r\n    const handleSaveDeadline = () => {\r\n        console.log(startDate);\r\n        console.log(endDate);\r\n        setOpenDeadline(true);\r\n        setIsModalDeadVisible(false);\r\n    };\r\n    const handleDeleteDeadline = () => {\r\n        setOpenDeadline(false);\r\n    };\r\n    function getDateValue(dates, dateStrings) {\r\n        setStartDate(dateStrings[0]);\r\n        setEndDate(dateStrings[1]);\r\n    }\r\n    const onChangeCheckColor = () => {\r\n        setDone(!done);\r\n        {\r\n        done ? setColorDone(\"#61bd4f\") : setColorDone(\"#EBECF0\");\r\n        }\r\n    };\r\n    const { RangePicker } = DatePicker;\r\n\r\n\r\n    //NDL\r\n    const styleTask = {\r\n        padding: '5px 10px',\r\n        background: '#fff',\r\n        marginBottom: '10px',\r\n        borderRadius: '5px',\r\n        fontWeight: '500',\r\n        textAlign: 'left',\r\n        cursor: 'pointer'\r\n    };\r\n    const solves = () => {\r\n        alert(\"Xử lý\");\r\n    }\r\n\r\n    //state\r\n    const [comments, setcomments] = useState([]);\r\n    const [contentCmt, setcontentCmt] = useState(\"\");\r\n    const [userTask, setuserTask] = useState([]);\r\n    const [userNoTask, setuserNoTask] = useState([]);\r\n    const [image, setimage] = useState(props.obj.image);\r\n\r\n    //onchange\r\n    const commentOnChange = (e)=>{\r\n        if(e.target.value){\r\n            setcontentCmt(e.target.value);\r\n        }\r\n    }\r\n\r\n    //get data\r\n    //get all comment\r\n    const getAllComment = async ()=>{\r\n        const cmt = await getComments({\r\n            taskId: props.obj.taskId\r\n        });\r\n        console.log(\"list cmt: \",cmt.data)\r\n        return cmt.data;\r\n    }\r\n    //Lấy tất cả user được giao việc trong task\r\n    const getAllUserTask = async ()=>{\r\n        const ut = await getAllUserInTask({taskId: props.obj.taskId})\r\n        console.log(ut)\r\n        // const ut = await api.get(\"user_task\");\r\n        return ut.data;\r\n    }\r\n    //Lấy tât cả user trong bảng mà ko thuộc task\r\n    const getAllUserNoTask = async()=>{\r\n        const unt = await getUsersToAddToTask({taskId: props.obj.taskId});\r\n        // const unt = await api.get(\"user_no_task\");\r\n        return unt.data;\r\n    }\r\n\r\n    //Chi tiết người dùng trong task\r\n    const detailUserTask = (obj) =>{\r\n        console.log(obj);\r\n    }\r\n\r\n    /**\r\n     * 3 chức năng trong task\r\n     * Thêm Thành viên, Deadline, ảnh bìa\r\n     */\r\n\r\n    //Click nut them thanh vien\r\n    const btnAddMemberOnClick = async ()=>{\r\n        const dom = document.getElementById(\"modal-member\");\r\n        dom.classList.toggle(\"isHide\")\r\n        const x = await getAllUserNoTask();\r\n        setuserNoTask(x);\r\n    }\r\n    const btnCloseOnClick = ()=>{\r\n        const dom = document.getElementById(\"modal-member\");\r\n        dom.classList.add(\"isHide\")\r\n    }\r\n    //Click vào thành viên để thêm thành viên vào táks\r\n    const btnAddMemberTask = async (obj)=>{\r\n        const arr = userNoTask;\r\n        console.log(\"arr: \",arr)\r\n        for(let i =0;i<arr.length;i++){\r\n            if(obj.id==arr[i].id){\r\n                arr.splice(i,1);\r\n                // console.log(arr[i]);\r\n                \r\n            }\r\n        }\r\n        await postUserToTaskApi({\r\n            userId: obj.id,\r\n            taskId: props.obj.taskId\r\n        });\r\n        setuserTask([...userTask,obj])\r\n        setuserNoTask([...arr]);\r\n    }\r\n    //ảnh bìa - mở\r\n    const chooseImage = () =>{\r\n        const dom = document.getElementById(\"modal-picture\");\r\n        dom.classList.toggle(\"isHide\")\r\n    }\r\n    //ảnh bìa - đóng\r\n    const btnCloseImageOnClick =()=>{\r\n        const dom = document.getElementById(\"modal-picture\");\r\n        dom.classList.add(\"isHide\")\r\n        // setimage(\"\");\r\n    }\r\n    //Ảnh bìa - chọn ảnh\r\n    const imageOnChange = (e)=>{\r\n        if(e.target.files[0]){\r\n            setimage(e.target.files[0])\r\n        }\r\n    }\r\n    //Ảnh bìa - tải lên ảnh\r\n    const btnUploadImageOnClick = ()=>{\r\n        console.log(image.name)\r\n        if(image.name){\r\n            var imgSplit = image.name.split(\".\");\r\n            var imgName = uuidv4()+\".\"+imgSplit[imgSplit.length-1];\r\n            // console.log(imgName);\r\n            const uploadTask = storage.ref(`images/${imgName}`).put(image);\r\n            uploadTask.on(\r\n                \"state_change\",\r\n                snapshot => {},\r\n                error => {\r\n                    console.log(error);\r\n                },\r\n                 () => {\r\n                    storage.ref('images')\r\n                        .child(imgName)\r\n                        .getDownloadURL()\r\n                        .then(async (url)=>{\r\n                            console.log(url);\r\n                            await updateImageTask({\r\n                                taskId:props.obj.taskId,\r\n                                urlImage:url\r\n                            }).then((res)=>{\r\n                                console.log(\"sau khi upload:\",res)\r\n                                setimage(res.data);\r\n                            });\r\n                            \r\n                        });\r\n                }\r\n            );\r\n        }else alert(\"Chwa chon anh\");\r\n    }\r\n    \r\n    /**\r\n     * Post Data\r\n     */\r\n    //post comment\r\n    const postComment = async ()=>{\r\n        const comment = {\r\n            taskId: props.obj.taskId,\r\n            content: contentCmt,\r\n            fullName:props.user.fullName\r\n\r\n        }\r\n        // debugger;\r\n        await postCommentApi({\r\n            taskId: props.obj.taskId,\r\n            content: contentCmt\r\n        }).then(res=>{\r\n            setcomments([...comments,comment]);\r\n            setcontentCmt(\"\");\r\n        });\r\n        // await api.post(\"/comment\",comment).then(res=>{\r\n        //     console.log(res);\r\n        //     setcomments([...comments,comment]);\r\n        //     setcontentCmt(\"\");\r\n        // }).catch(ex=>{\r\n        //     console.log(ex);\r\n        // })\r\n    }\r\n\r\n    //useeffect\r\n    useEffect(() => {\r\n        console.log(\"obj: \",props.obj)\r\n        const getAll = async ()=>{\r\n            //comment\r\n            const allComment = await getAllComment();\r\n            if(allComment) {\r\n                console.log(allComment);\r\n                setcomments(allComment);\r\n            }\r\n                \r\n            //user_task\r\n            const allUserTask = await getAllUserTask();\r\n            if(allUserTask) \r\n                setuserTask(allUserTask);\r\n            \r\n        }\r\n        getAll();\r\n    }, [])\r\n    console.log(\"user_task: \",userTask);\r\n    return (\r\n        \r\n        <>\r\n            {/* <Modal centered width={800} visible={isModalVisible} footer={null}  onCancel={handleCancel}> */}\r\n                <img src={(image)?image:\"\"} className={(image==\"\")?\"isHide\":\"\"} style={{width:\"100%\",height:\"400px\",margin:\"15px 0 10px 0\"}}  />\r\n                <div className=\"modal-custom\">\r\n                    <div className=\"card-left\">\r\n                        {/* Tên task */}\r\n                        <div className=\"card-left__name flex mb-10\" style={{marginTop:\"10px\"}}>\r\n                            <HomeOutlined className=\"common-icon width-10\"/>\r\n                            {/* <div className=\"name-icon width-10\">icon</div> */}\r\n                            <div className=\"name-name\">Tên thẻ</div>\r\n                        </div>\r\n\r\n                        {/* Thành viên, ngày hết hạn */}\r\n                        <div className=\"card-left__memeber flex mb-10\" style={{fontSize:\"14px\"}}>\r\n                            <div className=\"width-10\"/>\r\n                            <div className=\"memeber-memeber\" >\r\n                                <div>THÀNH VIÊN</div>\r\n                                <div>\r\n                                    {/* Duyet tat ca thanh vien */}\r\n                                    {\r\n                                        userTask.map((obj,index)=>(\r\n                                            <button key={index} onClick={()=>detailUserTask(obj)} className=\"member-task\">\r\n                                                <Avatar\r\n                                                    style={{\r\n                                                    color: '#fff',\r\n                                                    backgroundColor: '#84ABF7',\r\n                                                    fontSize: '12px',\r\n                                                    fontWeight: '500'\r\n                                                    }}\r\n                                                >{(obj.fullName)?obj.fullName.charAt(0).toUpperCase():\"\"}\r\n                                                </Avatar>\r\n                                            </button>\r\n                                        ))\r\n                                    }\r\n                                    <button onClick={btnAddMemberOnClick} className=\"member-task\">\r\n                                        <Avatar\r\n                                            style={{\r\n                                            color: '#fff',\r\n                                            backgroundColor: '#84ABF7',\r\n                                            fontSize: '12px',\r\n                                            fontWeight: '500',\r\n                                            margin: '0 0 0 2px'  \r\n                                        }}><PlusOutlined/>\r\n                                        </Avatar>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            {/* new */}\r\n                            {/* deadline box */}\r\n                            {openDeadline ? (\r\n                                <div className=\"memeber-deadline\" style={{ marginLeft: \"20px\" }}>\r\n                                    <div>NGÀY HẾT HẠN</div>\r\n                                    <div className=\"box-deadline\">\r\n                                        <div className=\"time-deadline\">\r\n                                        <Checkbox checked={!done} onChange={onChangeCheckColor} />\r\n                                        <span>\r\n                                            From {startDate} to {endDate}\r\n                                        </span>\r\n                                        {!done ? (\r\n                                            <span className=\"check-done\">Done !</span>\r\n                                        ) : (\r\n                                            <div />\r\n                                        )}\r\n                                        <Dropdown\r\n                                            trigger=\"click\"\r\n                                            overlay={\r\n                                            <Button\r\n                                                onClick={handleDeleteDeadline}\r\n                                                className=\"butDelete-Deadline\"\r\n                                            >\r\n                                                Delete Deadline\r\n                                            </Button>\r\n                                            }\r\n                                            placement=\"bottomRight\"\r\n                                            arrow\r\n                                        >\r\n                                            <DownOutlined style={{ marginLeft: \"7px\" }} />\r\n                                        </Dropdown>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                ) : (\r\n                            <div />\r\n                            )}\r\n                        </div>\r\n                        \r\n                        {/* Tiêu đề mô tả: icon và chữ mô tả chi tiết */}\r\n                        <div className=\"card-left__description flex mb-10\">\r\n                            <MenuOutlined className=\"common-icon width-10\" />\r\n                            <div className=\"des-name\">Mô tả chi tiết</div>\r\n                        </div>\r\n\r\n                        {/* Ô input nhập mô tả */}\r\n                        <div className=\"card-left__des-input flex mb-10\">\r\n                            <div className=\"width-10\"></div>\r\n                            <input style={{padding:\"0 0 0 10px\"}} className=\"des-input\" placeholder=\"Mô tả công việc\" />\r\n                        </div>\r\n\r\n                        {/* Tiêu đề bình luận (Icon và Chữ Bình Luận) */}\r\n                        <div className=\"card-left__cmt flex mb-10\"  style={{marginTop:\"40px\"}}>\r\n                            <MessageOutlined className=\"width-10 common-icon\"/>\r\n                            <div className=\"cmt-name\">\r\n                                <div>Bình luận</div>\r\n                                <Button>Ẩn chi tiết</Button>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        {/* Viết bình luân (Avatar và ô input) */}\r\n                        <div className=\"card-left__cmt flex mb-10\">\r\n                            {/* <div className=\"width-10 avatar\">L</div> */}\r\n                            <Avatar\r\n                                style={{\r\n                                color: '#fff',\r\n                                backgroundColor: '#84ABF7',\r\n                                fontSize: '12px',\r\n                                fontWeight: '500',\r\n                                margin: '5px 15px 0 12px'  \r\n                            }}>L\r\n                            </Avatar>\r\n                            <input onChange={commentOnChange} value={contentCmt} style={{padding:\"0 0 0 10px\"}}  className=\"cmt-input\" placeholder=\"Viết Bình Luận\"  />\r\n                        </div>\r\n\r\n                        {/* Nút bình luận */}\r\n                        <div className=\"flex mb-10\">\r\n                            <div className=\"width-10\"></div>\r\n                            <Button onClick={postComment}>Lưu</Button>\r\n                        </div>\r\n                        \r\n                        \r\n                        \r\n                        {/* Nội dung bình luận (avatar và nội dung bình luận) */}\r\n                        {\r\n                            comments.map((obj,index)=>(\r\n                                <div key={index} className=\"card-left__cmt-content flex mb-10\">\r\n                                    {/* avatar*/}\r\n                                    <Avatar\r\n                                        style={{\r\n                                        color: '#fff',\r\n                                        backgroundColor: '#84ABF7',\r\n                                        fontSize: '12px',\r\n                                        fontWeight: '500',\r\n                                        margin: '5px 15px 0 12px'  \r\n                                    }}>{(obj.fullName)?obj.fullName.charAt(0).toUpperCase():\"\"}\r\n                                    </Avatar>\r\n                                    {/* Nội dung bình luận: tên, ngày, nội dung, reaction, sửa, xoá */}\r\n                                    <div className=\"cmt-right\">\r\n                                        <div className=\"cmt-user\">\r\n                                            {/* Tên người bình luận */}\r\n                                            {obj.fullName}\r\n                                            <span className=\"cmt-date\">\r\n                                                {/* Ngày bình luận */}\r\n                                                {obj.createDate}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"cmt-content\">\r\n                                            {/* Nội dung bình luận */}\r\n                                            {obj.content}\r\n                                        </div>\r\n                                        <div className=\"cmt-react\">\r\n                                            <SmileOutlined /> - Chỉnh sửa - Xoá\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                        \r\n                    </div>\r\n                    {/* Bên phải modal: các chức năng */}\r\n                    <div className=\"card-right\">\r\n                        <div className=\"btn-right\">\r\n                            <Button onClick={btnAddMemberOnClick} style={{width:\"100%\"}}>\r\n                                <UserAddOutlined />\r\n                                Thành viên\r\n                            </Button>\r\n                            <div id=\"modal-member\" className=\"isHide modal-member\">\r\n                                <button onClick={btnCloseOnClick} className=\"btnClose\">X</button>\r\n                                <center style={{marginTop:\"7px\", fontSize:\"14px\"}}>Thêm thành viên vào bảng</center>\r\n                                <hr width=\"90%\" />\r\n                                {/* <div className=\"search-member-input\">\r\n                                    <input type=\"text\" placeholder=\"Tìm kiếm thành viên\" />\r\n                                </div> */}\r\n                                <div className=\"title-member-board\">Thành viên của bảng</div>\r\n\r\n                                {/* Danh sachs thành viên trong bảng nhưng ko có trong task */}\r\n                                {\r\n                                    userNoTask.map((obj,index)=>(\r\n                                        <div key={index} className=\"memeber-list\">\r\n                                            <button onClick={()=>btnAddMemberTask(obj)} className=\"btn-member-task\">\r\n                                                <Avatar className=\"avatar\">{(obj.fullName)?(obj.fullName.charAt(0).toUpperCase()):\"\"}</Avatar>\r\n                                                {obj.fullName}\r\n                                            </button>\r\n                                        </div>\r\n                                    ))\r\n                                }\r\n                                \r\n                                \r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* new */}\r\n                        {/* Deadline */}\r\n                        <div className=\"btn-right\">\r\n                            <Button onClick={showModalDead} style={{ width: \"100%\" }}>\r\n                                <FieldTimeOutlined />\r\n                                Ngày\r\n                            </Button>\r\n                            <Modal\r\n                                width={300}\r\n                                title=\"Deadline\"\r\n                                visible={isModalDeadVisible}\r\n                                footer={null}\r\n                                onCancel={handleCancelDead}\r\n                            >\r\n                                <div>\r\n                                <Form>\r\n                                    <div className=\"title-date\">\r\n                                    <h4>Start Date</h4>\r\n                                    <h4 style={{ marginLeft: \"68px\" }}>End Date</h4>\r\n                                    </div>\r\n                                    <RangePicker\r\n                                        defaultValue={[moment('2015/01/01', dateFormat), moment('2015/01/01', dateFormat)]}\r\n                                        onChange={getDateValue}  />\r\n                                    <br />\r\n                                    <Button\r\n                                        onClick={handleSaveDeadline}\r\n                                        style={{ marginTop: \"15px\" }}\r\n                                        type=\"primary\"\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </Form>\r\n                                </div>\r\n                            </Modal>\r\n                        </div>\r\n\r\n                        <div className=\"btn-right\">\r\n                            <Button onClick={chooseImage} style={{width:\"100%\"}}>\r\n                                <PictureOutlined />\r\n                                Ảnh Bìa\r\n                            </Button>\r\n                            <div id=\"modal-picture\" className=\"modal-member isHide\">\r\n                                <button onClick={btnCloseImageOnClick} className=\"btnClose\">X</button>\r\n                                <center style={{marginTop:\"7px\", fontSize:\"14px\"}}>Ảnh bìa</center>\r\n                                <hr width=\"90%\" />\r\n                                \r\n                                <div className=\"title-member-board\">Tệp Đính Kèm</div>\r\n                                \r\n                                <input onChange={imageOnChange} style={{marginLeft:\"13px\"}} type=\"file\" accept=\"image/*\"/>\r\n                                <Button onClick={btnUploadImageOnClick} style={{width:\"90%\",margin:\"20px 0 0 13px\"}}>Upload</Button>\r\n                                <img className={(image.name||image==\"\")?\"isHide\":\"\"} style={{width:\"150px\",height:\"150px\",margin:\"10px 0 0 40px\"}} src={(image)?image:\"\"} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            {/* </Modal>           */}\r\n       \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Task;"]},"metadata":{},"sourceType":"module"}